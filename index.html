<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Knitting Counter Dual - Final</title>
<style>
    :root {
        --scale: 1.5; /* 초기 배율 */
    }
    body { 
        margin:0; 
        background:#f7f7f7; 
        font-family:-apple-system,BlinkMacSystemFont,sans-serif; 
        display:flex; 
        flex-direction:column; 
        align-items:center; 
        justify-content:center; 
        height:100vh; 
        user-select:none;
    }
    .container { 
        display:flex; 
        gap: calc(80px * var(--scale)); 
        align-items:center;
    }
    .counter-box { 
        display:flex; 
        flex-direction:column; 
        align-items:center;
    }
    .label { 
        font-size: calc(2rem * var(--scale)); 
        color:#555; 
        margin-bottom: calc(10px * var(--scale));
    }
    .value-wrapper { 
        display:flex; 
        align-items:center; 
        gap: calc(20px * var(--scale));
    }
    .value { 
        font-size: calc(6rem * 0.75 * var(--scale)); /* 75%로 축소 */ 
        font-weight:700; 
        color:#333; 
        min-width: calc(120px * var(--scale)); 
        text-align:center;
    }
    .arrow-box { 
        display:flex; 
        flex-direction:column; 
        gap: calc(15px * var(--scale));
    }
    .arrow-btn { 
        width: calc(60px * var(--scale)); 
        height: calc(60px * var(--scale)); 
        font-size: calc(2rem * var(--scale)); 
        font-weight:bold; 
        border:none; 
        border-radius: calc(14px * var(--scale)); 
        background:white; 
        box-shadow:0 calc(3px * var(--scale)) calc(7px * var(--scale)) rgba(0,0,0,0.15); 
        cursor:pointer; 
        color:#444;
    }
    .arrow-btn:active { transform:scale(0.95); }
    .reset-btn { 
        padding: calc(14px * var(--scale)) calc(30px * var(--scale)); 
        font-size: calc(1.2rem * var(--scale)); 
        border:none; 
        border-radius: calc(12px * var(--scale)); 
        font-weight:600; 
        cursor:pointer; 
        box-shadow:0 calc(6px * var(--scale)) calc(12px * var(--scale)) rgba(0,0,0,0.15); 
    }
    .reset-btn:active { transform:scale(0.97); }
    .reset-btn#resetRow, .reset-btn#resetStitch { background:#ff6b6b; color:white; margin-top: calc(20px * var(--scale)); }
    .info { 
        font-size: calc(1rem * var(--scale)); 
        color:#777; 
        position:absolute; 
        bottom: calc(70px * var(--scale)); 
        text-align:center; 
        line-height: calc(1.4em * var(--scale));
    }
    .timer-box { 
        display:flex; 
        gap: calc(20px * var(--scale)); 
        margin-top: calc(20px * var(--scale));
    }
    .timer { 
        font-size: calc(3rem * 0.75 * var(--scale)); /* 75%로 축소 */
        font-weight:700; 
        min-width: calc(180px * var(--scale)); 
        text-align:center; 
        background:white; 
        border-radius: calc(12px * var(--scale)); 
        box-shadow:0 calc(3px * var(--scale)) calc(7px * var(--scale)) rgba(0,0,0,0.15); 
        padding: calc(10px * var(--scale)) 0;
    }
    .start-btn, .end-btn, .reset-btn#resetTimer { 
        padding: calc(14px * var(--scale)) calc(30px * var(--scale)); 
        font-size: calc(1.2rem * var(--scale)); 
        border:none; 
        border-radius: calc(12px * var(--scale)); 
        color:white; 
        font-weight:600; 
        cursor:pointer; 
        box-shadow:0 calc(6px * var(--scale)) calc(12px * var(--scale)) rgba(0,0,0,0.15); 
    }
    .start-btn { background:#4ecdc4; }
    .end-btn { background:#b19cd9; } /* 옅은 보라색 */
    .reset-btn#resetTimer { background:#ff6b6b; }
    .start-btn:active, .end-btn:active, .reset-btn#resetTimer:active { transform:scale(0.97); }

    .scale-buttons {
        position:fixed;
        bottom:20px;
        right:20px;
        display:flex;
        flex-direction:column;
        gap:10px;
    }
    .scale-btn {
        padding:10px 16px;
        font-size:1rem;
        border:none;
        border-radius:8px;
        background:#555;
        color:white;
        cursor:pointer;
    }
    .scale-btn:active { transform:scale(0.95); }
</style>
</head>
<body>

<div class="container">
    <div class="counter-box">
        <div class="label">단</div>
        <div class="value-wrapper">
            <div class="value" id="rowCount">0</div>
            <div class="arrow-box">
                <button class="arrow-btn" id="rowUp">▲</button>
                <button class="arrow-btn" id="rowDown">▼</button>
            </div>
        </div>
        <button class="reset-btn" id="resetRow">단 초기화</button>
    </div>

    <div class="counter-box">
        <div class="label">코</div>
        <div class="value-wrapper">
            <div class="value" id="stitchCount">0</div>
            <div class="arrow-box">
                <button class="arrow-btn" id="stitchUp">▲</button>
                <button class="arrow-btn" id="stitchDown">▼</button>
            </div>
        </div>
        <button class="reset-btn" id="resetStitch">코 초기화</button>
    </div>
</div>

<div class="info">
    a: 코 증가 / b: 코 초기화 / c: 단 증가
</div>

<div class="timer-box">
    <div class="timer" id="timerDisplay">00:00:00</div>
</div>
<div class="timer-box">
    <button class="start-btn" id="startTimer">Start</button>
    <button class="end-btn" id="endTimer">End</button>
    <button class="reset-btn" id="resetTimer">Reset</button>
</div>

<div class="scale-buttons">
    <button class="scale-btn" data-scale="1.0">1.0x</button>
    <button class="scale-btn" data-scale="1.5">1.5x</button>
    <button class="scale-btn" data-scale="2.0">2.0x</button>
</div>

<script>
    // 단/코 카운터
    let countRow = parseInt(localStorage.getItem("knitRow") || "0");
    let countStitch = parseInt(localStorage.getItem("knitStitch") || "0");
    const rowEl = document.getElementById("rowCount");
    const stitchEl = document.getElementById("stitchCount");

    function update() {
        rowEl.innerText = countRow;
        stitchEl.innerText = countStitch;
        localStorage.setItem("knitRow", countRow);
        localStorage.setItem("knitStitch", countStitch);
    }

    update();

    document.addEventListener("keydown", e => {
        const key = e.key.toLowerCase();
        if(key==="a"){ countStitch++; }
        else if(key==="b"){ countStitch=0; }
        else if(key==="c"){ countRow++; }
        update();
    });

    document.getElementById("rowUp").addEventListener("click", ()=>{ countRow++; update(); });
    document.getElementById("rowDown").addEventListener("click", ()=>{ if(countRow>0) countRow--; update(); });
    document.getElementById("stitchUp").addEventListener("click", ()=>{ countStitch++; update(); });
    document.getElementById("stitchDown").addEventListener("click", ()=>{ if(countStitch>0) countStitch--; update(); });
    document.getElementById("resetRow").addEventListener("click", ()=>{ countRow=0; update(); });
    document.getElementById("resetStitch").addEventListener("click", ()=>{ countStitch=0; update(); });

    // 타이머
    let timer = 0;
    let intervalId = null;
    const timerEl = document.getElementById("timerDisplay");

    function formatTime(sec){
        let hours = Math.floor(sec/3600);
        let minutes = Math.floor((sec%3600)/60);
        let seconds = sec % 60;
        return String(hours).padStart(2,'0')+":"+String(minutes).padStart(2,'0')+":"+String(seconds).padStart(2,'0');
    }

    document.getElementById("startTimer").addEventListener("click", ()=>{
        if(intervalId) return;
        intervalId = setInterval(()=>{
            if(timer>=86400){
                clearInterval(intervalId);
                intervalId = null;
                return;
            }
            timer++;
            timerEl.innerText = formatTime(timer);
        }, 1000);
    });

    document.getElementById("endTimer").addEventListener("click", ()=>{
        clearInterval(intervalId);
        intervalId = null;
    });

    document.getElementById("resetTimer").addEventListener("click", ()=>{
        clearInterval(intervalId);
        intervalId = null;
        timer = 0;
        timerEl.innerText = "00:00:00";
    });

    // 배율 버튼 이벤트
    document.querySelectorAll('.scale-btn').forEach(btn=>{
        btn.addEventListener('click', ()=>{
            const scale = parseFloat(btn.getAttribute('data-scale'));
            document.documentElement.style.setProperty('--scale', scale);
        });
    });
</script>

</body>
</html>
